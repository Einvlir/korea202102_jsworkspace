<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script src="../../js/Bar.js"></script>
<script src="../../js/lib.js"></script>
<script>
var wrapper;
var barArray = new Array();
var colorArray = ["red","orange","yellow","green","blue","navy","purple"];
var count = 0;
var flag = true;
function init(){
    wrapper = document.getElementById("wrapper");
    wrapper.style.width = 500 + "px";
    wrapper.style.height = 400 + "px";
    wrapper.style.margin = "auto";
    wrapper.style.border = 4+"px solid blue";
    wrapper.style.position = "relative";
    wrapper.style.transform = "rotate(180deg)";
    
    createBar();//박스 생성
}

function createBar(){
    //(width,height,x,y,bg,container)
    for(var i = 0; i < 10; i ++){
        var bar = new Bar(wrapper,50,50,50*i,0,colorArray[getRandom(colorArray.length)],getRandom(350)+10);
        barArray.push(bar);
    }
}

function gameLoop(){
    if(flag){
        for(var i = 0; i < barArray.length ; i ++){
            barArray[i].render();
        }
        count++;
        if(count % 5 ==0){
            setTarget();
        }
    }
}

function setTarget(){
    
    barArray[getRandom(barArray.length)].targetH = getRandom(300) + 50;
}





window.addEventListener("load",function(){
    init();
    setInterval("gameLoop()",20);
    // setInterval("setTarget()",1000)
})
</script>
<body>
    <div id = "wrapper"></div>
</body>
</html>